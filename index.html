<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bahamas Store | Pedido via Discord</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root { --primary: #FFD700; --discord: #5865F2; --bg-body: #0d0f12; --bg-card: #16191f; }
        body { background-color: var(--bg-body); color: white; font-family: 'Montserrat', sans-serif; }
        
        .navbar { background: var(--bg-card); border-bottom: 2px solid var(--primary); }
        .navbar-brand { font-weight: 900; color: var(--primary) !important; }

        /* Categorias */
        .category-scroll { display: flex; gap: 10px; overflow-x: auto; padding: 15px; background: #0a0b0e; scrollbar-width: none; }
        .cat-btn { background: #1f232b; color: white; border: 1px solid #333; padding: 10px 20px; border-radius: 50px; cursor: pointer; white-space: nowrap; font-weight: 700; }
        .cat-btn.active { background: var(--primary); color: #000; }

        /* Cards */
        .prod-card { background: var(--bg-card); border-radius: 15px; border: 1px solid #2d3139; overflow: hidden; transition: 0.3s; }
        .prod-card:hover { border-color: var(--primary); transform: translateY(-5px); }
        
        /* Carrinho */
        .cart-btn { position: fixed; bottom: 20px; right: 20px; background: var(--primary); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; z-index: 2000; color: #000; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        
        .btn-discord { background: var(--discord); color: white; font-weight: 700; border: none; }
        .btn-discord:hover { background: #4752c4; color: white; }

        .view { display: none; }
        .view.active { display: block; }

        footer { background: #08090b; padding: 30px 0; border-top: 2px solid var(--primary); margin-top: 40px; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="showView('store')">BAHAMAS STORE</a>
            <div class="ms-auto">
                <button class="btn btn-sm btn-warning fw-bold" onclick="accessAdmin()"><i class="fas fa-cog"></i> ADMIN</button>
            </div>
        </div>
    </nav>

    <div id="view-store" class="view active">
        <div class="category-scroll" id="cat-list"></div>
        <div class="container py-4">
            <div class="row g-3" id="prod-grid"></div>
        </div>
    </div>

    <div id="view-admin" class="view container py-5">
        <div class="d-flex justify-content-between mb-4">
            <h4 class="text-warning fw-bold">Gerenciar Produtos</h4>
            <button class="btn btn-danger btn-sm" onclick="showView('store')">Sair</button>
        </div>
        <div class="bg-card p-4 rounded border border-secondary shadow">
            <div class="row g-3">
                <div class="col-md-3"><input type="text" id="adm-name" class="form-control bg-dark text-white border-secondary" placeholder="Nome"></div>
                <div class="col-md-2"><input type="number" id="adm-price" class="form-control bg-dark text-white border-secondary" placeholder="PreÃ§o"></div>
                <div class="col-md-3"><input type="text" id="adm-cat" class="form-control bg-dark text-white border-secondary" placeholder="Categoria"></div>
                <div class="col-md-4"><input type="text" id="adm-img" class="form-control bg-dark text-white border-secondary" placeholder="Link Imagem"></div>
                <div class="col-12"><button class="btn btn-warning w-100 fw-bold" onclick="addProd()">ADICIONAR PRODUTO</button></div>
            </div>
            <hr class="border-secondary my-4">
            <div id="adm-list"></div>
        </div>
    </div>

    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-card text-white border-0">
                <div class="modal-header border-secondary">
                    <h5 class="fw-bold text-primary">Seu Carrinho</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cart-items"></div>
                    <div class="mt-3 p-3 bg-dark rounded text-center">
                        <span class="small text-secondary">Total do Pedido:</span>
                        <h3 class="text-primary fw-bold" id="cart-total">R$ 0,00</h3>
                    </div>
                    <div class="alert alert-info mt-3 small" style="background: #1a2a3a; border: none; color: #8ab4f8;">
                        <i class="fas fa-info-circle me-2"></i> Ao finalizar, seu pedido serÃ¡ copiado. Cole-o no ticket do nosso Discord!
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-discord w-100 py-3 d-flex align-items-center justify-content-center gap-2" onclick="finishToDiscord()">
                        <i class="fab fa-discord fs-4"></i> COPIAR E ABRIR TICKET
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="cart-btn" onclick="openCart()">
        <i class="fas fa-shopping-basket"></i>
        <span id="cart-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
    </div>

    <footer class="text-center">
        <p class="small text-secondary">BAHAMAS STORE Â© 2024 | O melhor para seu RP</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        let db = JSON.parse(localStorage.getItem('bahamas_dc_v1')) || { prods: [] };
        let cart = [];

        function save() { 
            localStorage.setItem('bahamas_dc_v1', JSON.stringify(db)); 
            renderStore(); 
            renderAdmin(); 
        }

        function showView(v) {
            document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
            document.getElementById('view-' + v).classList.add('active');
        }

        function accessAdmin() {
            Swal.fire({ title: 'Senha Admin', input: 'password', background: '#16191f', color: '#fff', confirmButtonColor: '#FFD700' }).then(r => { if(r.value === '2707') showView('admin'); });
        }

        function addProd() {
            const n = document.getElementById('adm-name').value, p = document.getElementById('adm-price').value, c = document.getElementById('adm-cat').value, i = document.getElementById('adm-img').value;
            if(n && p) { db.prods.push({ id: Date.now(), name: n, price: p, cat: c || 'Geral', img: i || 'https://via.placeholder.com/150' }); save(); }
        }

        function removeProd(id) { db.prods = db.prods.filter(p => p.id !== id); save(); }

        function renderStore(filter = 'Todos') {
            const cats = ['Todos', ...new Set(db.prods.map(p => p.cat))];
            document.getElementById('cat-list').innerHTML = cats.map(c => `<div class="cat-btn ${filter===c?'active':''}" onclick="renderStore('${c}')">${c}</div>`).join('');
            
            const filtered = filter === 'Todos' ? db.prods : db.prods.filter(p => p.cat === filter);
            document.getElementById('prod-grid').innerHTML = filtered.map(p => `
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="prod-card p-2">
                        <img src="${p.img}" class="w-100 rounded mb-2" style="height:120px; object-fit:cover">
                        <h6 class="fw-bold mb-1 small">${p.name}</h6>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-primary fw-bold">R$ ${p.price}</span>
                            <button class="btn btn-sm btn-warning" onclick="addToCart(${p.id})">+</button>
                        </div>
                    </div>
                </div>`).join('');
        }

        function addToCart(id) {
            cart.push(db.prods.find(p => p.id === id));
            document.getElementById('cart-badge').innerText = cart.length;
            Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: 'Adicionado!', showConfirmButton: false, timer: 1000 });
        }

        function openCart() {
            let total = 0;
            document.getElementById('cart-items').innerHTML = cart.length ? cart.map((i, idx) => { 
                total += parseFloat(i.price); 
                return `<div class="d-flex justify-content-between mb-2 border-bottom border-secondary pb-1">
                            <span>${i.name}</span>
                            <div class="d-flex gap-2 align-items-center">
                                <b>R$ ${i.price}</b>
                                <i class="fas fa-times text-danger" onclick="removeFromCart(${idx})" style="cursor:pointer"></i>
                            </div>
                        </div>` 
            }).join('') : '<p class="text-center py-3">Carrinho vazio</p>';
            document.getElementById('cart-total').innerText = `R$ ${total.toFixed(2)}`;
            new bootstrap.Modal(document.getElementById('cartModal')).show();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            document.getElementById('cart-badge').innerText = cart.length;
            openCart();
        }

        function finishToDiscord() {
            if(!cart.length) return;
            
            let total = 0;
            let itemList = cart.map(i => {
                total += parseFloat(i.price);
                return `â€¢ ${i.name} (R$ ${i.price})`;
            }).join('\n');

            let orderText = `ðŸ›’ **NOVO PEDIDO - BAHAMAS STORE**\n\n` +
                            `ðŸ“¦ **Itens:**\n${itemList}\n\n` +
                            `ðŸ’° **Total:** R$ ${total.toFixed(2)}\n` +
                            `ðŸ’³ **MÃ©todo:** PIX\n\n` +
                            `OlÃ¡! Gostaria de finalizar este pedido.`;

            // Copia para a Ã¡rea de transferÃªncia
            navigator.clipboard.writeText(orderText).then(() => {
                Swal.fire({
                    title: 'Pedido Copiado!',
                    text: 'Agora cole a mensagem no canal de ticket do Discord.',
                    icon: 'success',
                    confirmButtonText: 'IR PARA DISCORD',
                    confirmButtonColor: '#5865F2'
                }).then(() => {
                    window.open('https://discord.gg/uV3XzeWAtb', '_blank');
                    cart = [];
                    document.getElementById('cart-badge').innerText = 0;
                    bootstrap.Modal.getInstance(document.getElementById('cartModal')).hide();
                });
            });
        }

        function renderAdmin() {
            document.getElementById('adm-list').innerHTML = db.prods.map(p => `
                <div class="d-flex justify-content-between align-items-center bg-dark p-2 mb-2 rounded">
                    <span>${p.name} - R$ ${p.price} (${p.cat})</span>
                    <button class="btn btn-sm btn-danger" onclick="removeProd(${p.id})">Excluir</button>
                </div>`).join('');
        }

        renderStore();
    </script>
</body>
</html>
