<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bahamas Store | Luxury & Delivery</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root { --primary: #FFD700; --bg-body: #0d0f12; --bg-card: #16191f; --bg-darker: #08090b; }
        body { background-color: var(--bg-body); color: white; font-family: 'Montserrat', sans-serif; }
        
        .navbar { background: var(--bg-card); border-bottom: 2px solid var(--primary); }
        .navbar-brand { font-weight: 800; color: var(--primary) !important; }

        /* Imagens Corrigidas */
        .img-container { width: 100%; height: 160px; overflow: hidden; background: #222; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
        .prod-card:hover img { transform: scale(1.1); }

        .category-scroll { display: flex; gap: 10px; overflow-x: auto; padding: 15px; background: var(--bg-darker); scrollbar-width: none; }
        .cat-btn { background: #1f232b; color: white; border: 1px solid #333; padding: 10px 22px; border-radius: 8px; cursor: pointer; white-space: nowrap; font-weight: 600; transition: 0.3s; }
        .cat-btn.active { background: var(--primary); color: #000; }

        .prod-card { background: var(--bg-card); border-radius: 12px; border: 1px solid #2d3139; overflow: hidden; transition: 0.3s; }
        .prod-card:hover { border-color: var(--primary); transform: translateY(-5px); }
        
        /* Avalia√ß√µes */
        .review-card { background: var(--bg-card); border-radius: 12px; padding: 15px; border-left: 4px solid var(--primary); margin-bottom: 15px; }
        .star-rating { color: var(--primary); font-size: 0.8rem; }

        /* ADM */
        .adm-nav-link { color: #ccc; padding: 12px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: 0.3s; margin-bottom: 5px; }
        .adm-nav-link:hover, .adm-nav-link.active { background: var(--primary); color: #000; font-weight: 700; }
        
        .view { display: none; }
        .view.active { display: block; }
        .adm-tab { display: none; }
        .adm-tab.active { display: block; }

        .cart-btn { position: fixed; bottom: 25px; right: 25px; background: var(--primary); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; cursor: pointer; z-index: 2000; color: #000; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="showView('store')">BAHAMAS STORE</a>
            <div class="ms-auto">
                <button class="btn btn-sm btn-warning fw-bold" onclick="accessAdmin()"><i class="fas fa-tools"></i> PAINEL ADM</button>
            </div>
        </div>
    </nav>

    <div id="view-store" class="view active">
        <div class="category-scroll" id="cat-list"></div>
        <div class="container py-4">
            <h5 class="fw-bold mb-3"><i class="fas fa-shopping-bag text-primary"></i> Nossos Produtos</h5>
            <div class="row g-4" id="prod-grid"></div>

            <h5 class="fw-bold mt-5 mb-3"><i class="fas fa-star text-primary"></i> Avalia√ß√µes Recentes</h5>
            <div id="review-list" class="row"></div>
        </div>
    </div>

    <div id="view-admin" class="view container py-4">
        <div class="row">
            <div class="col-md-3">
                <div class="bg-card p-3 rounded border border-secondary">
                    <div class="adm-nav-link active" onclick="switchAdmTab('prods', this)"><i class="fas fa-box"></i> Itens</div>
                    <div class="adm-nav-link" onclick="switchAdmTab('cupons', this)"><i class="fas fa-ticket-alt"></i> Cupons</div>
                    <div class="adm-nav-link" onclick="switchAdmTab('reviews', this)"><i class="fas fa-comment-dots"></i> Depoimentos</div>
                    <div class="adm-nav-link" onclick="switchAdmTab('config', this)"><i class="fas fa-cog"></i> Configs</div>
                    <button class="btn btn-outline-danger w-100 mt-3 btn-sm" onclick="showView('store')">Sair</button>
                </div>
            </div>

            <div class="col-md-9">
                <div id="adm-prods" class="adm-tab active">
                    <button class="btn btn-warning btn-sm fw-bold mb-3" onclick="openAddProdModal()">+ Novo Produto</button>
                    <div class="table-responsive bg-card rounded p-2"><table class="table table-dark"><tbody id="adm-table-prods"></tbody></table></div>
                </div>

                <div id="adm-cupons" class="adm-tab">
                    <h4>Cupons</h4>
                    <div class="bg-card p-3 rounded border border-secondary mb-3">
                        <div class="row g-2">
                            <div class="col-6"><input type="text" id="cup-code" class="form-control bg-dark text-white" placeholder="C√ìDIGO (Ex: OFF10)"></div>
                            <div class="col-4"><input type="number" id="cup-perc" class="form-control bg-dark text-white" placeholder="% Desconto"></div>
                            <div class="col-2"><button class="btn btn-warning w-100" onclick="addCoupon()">+</button></div>
                        </div>
                    </div>
                    <div id="adm-list-cupons"></div>
                </div>

                <div id="adm-reviews" class="adm-tab">
                    <h4>Gerenciar Avalia√ß√µes</h4>
                    <div class="bg-card p-3 rounded border border-secondary mb-3">
                        <input type="text" id="rev-user" class="form-control bg-dark text-white mb-2" placeholder="Nome do Cliente">
                        <textarea id="rev-text" class="form-control bg-dark text-white mb-2" placeholder="O que ele disse..."></textarea>
                        <select id="rev-stars" class="form-select bg-dark text-white mb-2">
                            <option value="5">5 Estrelas</option><option value="4">4 Estrelas</option>
                        </select>
                        <button class="btn btn-warning w-100" onclick="addReview()">Adicionar Avalia√ß√£o</button>
                    </div>
                    <div id="adm-list-reviews"></div>
                </div>

                <div id="adm-config" class="adm-tab">
                    <h4>Configura√ß√µes Gerais</h4>
                    <div class="bg-card p-3 rounded">
                        <label class="small">Link Discord</label>
                        <input type="text" id="cfg-discord" class="form-control bg-dark text-white mb-3">
                        <button class="btn btn-warning" onclick="saveConfigs()">Salvar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-card text-white">
                <div class="modal-header border-secondary"><h5>Seu Carrinho</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
                <div class="modal-body">
                    <div id="cart-items"></div>
                    <div class="mt-3 p-2 bg-dark rounded">
                        <div class="input-group">
                            <input type="text" id="cart-coupon-input" class="form-control bg-transparent text-white border-secondary" placeholder="Cupom de desconto">
                            <button class="btn btn-outline-warning" onclick="applyCoupon()">Aplicar</button>
                        </div>
                    </div>
                    <div class="mt-3 text-center">
                        <small id="discount-msg" class="text-success d-none">Cupom aplicado!</small>
                        <h3 class="text-primary fw-bold" id="cart-total">R$ 0,00</h3>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-primary w-100 py-3 fw-bold" style="background:#5865F2; border:none;" onclick="finishToDiscord()">FINALIZAR NO DISCORD</button>
                </div>
            </div>
        </div>
    </div>

    <div class="cart-btn" onclick="openCart()"><i class="fas fa-shopping-basket"></i><span id="cart-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span></div>

    <div class="modal fade" id="prodModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content bg-card text-white"><div class="modal-header"><h5>Novo Item</h5></div><div class="modal-body">
        <input type="text" id="p-name" class="form-control bg-dark text-white mb-2" placeholder="Nome">
        <input type="number" id="p-price" class="form-control bg-dark text-white mb-2" placeholder="Pre√ßo">
        <select id="p-cat" class="form-select bg-dark text-white mb-2"></select>
        <input type="text" id="p-img" class="form-control bg-dark text-white mb-2" placeholder="URL da Imagem">
        <button class="btn btn-warning w-100" onclick="saveProd()">CADASTRAR</button>
    </div></div></div></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        let store = JSON.parse(localStorage.getItem('bahamas_pro_v3')) || {
            discord: "https://discord.gg/uV3XzeWAtb",
            cats: ["VIPs", "Carros", "Itens"],
            prods: [],
            coupons: [],
            reviews: [{user: "Marcos Souza", text: "Entrega muito r√°pida, recomendo!", stars: 5}]
        };
        let cart = [];
        let activeDiscount = 0;

        function sync() { localStorage.setItem('bahamas_pro_v3', JSON.stringify(store)); renderAll(); }
        function showView(v) { document.querySelectorAll('.view').forEach(el => el.classList.remove('active')); document.getElementById('view-' + v).classList.add('active'); }
        function switchAdmTab(tabId, el) { document.querySelectorAll('.adm-tab').forEach(t => t.classList.remove('active')); document.querySelectorAll('.adm-nav-link').forEach(l => l.classList.remove('active')); document.getElementById('adm-' + tabId).classList.add('active'); el.classList.add('active'); }
        function accessAdmin() { Swal.fire({ title: 'ADM', input: 'password', background: '#16191f', color: '#fff' }).then(r => { if(r.value === '2707') { showView('admin'); renderAdmin(); } }); }

        function renderStore(filter = 'Todos') {
            const catScroll = document.getElementById('cat-list');
            catScroll.innerHTML = `<div class="cat-btn ${filter==='Todos'?'active':''}" onclick="renderStore('Todos')">Todos</div>` + store.cats.map(c => `<div class="cat-btn ${filter===c?'active':''}" onclick="renderStore('${c}')">${c}</div>`).join('');

            const grid = document.getElementById('prod-grid');
            const list = filter === 'Todos' ? store.prods : store.prods.filter(p => p.cat === filter);
            grid.innerHTML = list.map(p => `
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="prod-card shadow">
                        <div class="img-container"><img src="${p.img || 'https://via.placeholder.com/200'}" onerror="this.src='https://via.placeholder.com/200'"></div>
                        <div class="p-3 text-center">
                            <h6 class="fw-bold mb-1 small">${p.name}</h6>
                            <div class="star-rating mb-2"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                            <div class="d-flex justify-content-between align-items-center"><span class="text-primary fw-bold">R$ ${p.price}</span><button class="btn btn-sm btn-warning" onclick="addToCart(${p.id})">+</button></div>
                        </div>
                    </div>
                </div>`).join('');

            document.getElementById('review-list').innerHTML = store.reviews.map(r => `
                <div class="col-md-6"><div class="review-card">
                    <div class="d-flex justify-content-between"><b>${r.user}</b> <div class="star-rating">${'<i class="fas fa-star"></i>'.repeat(r.stars)}</div></div>
                    <p class="small text-secondary mb-0 mt-1">"${r.text}"</p>
                </div></div>`).join('');
        }

        function addToCart(id) { cart.push(store.prods.find(p => p.id === id)); document.getElementById('cart-badge').innerText = cart.length; }

        function openCart() {
            updateCartTotal();
            new bootstrap.Modal(document.getElementById('cartModal')).show();
        }

        function applyCoupon() {
            const code = document.getElementById('cart-coupon-input').value.toUpperCase();
            const cp = store.coupons.find(c => c.code === code);
            if(cp) {
                activeDiscount = cp.perc;
                document.getElementById('discount-msg').classList.remove('d-none');
                updateCartTotal();
            } else {
                Swal.fire('Erro', 'Cupom inv√°lido!', 'error');
            }
        }

        function updateCartTotal() {
            let subtotal = cart.reduce((a,b) => a + parseFloat(b.price), 0);
            let total = subtotal - (subtotal * (activeDiscount / 100));
            document.getElementById('cart-items').innerHTML = cart.map((i, idx) => `<div class="d-flex justify-content-between small border-bottom border-secondary py-1"><span>${i.name}</span><b>R$ ${i.price}</b></div>`).join('');
            document.getElementById('cart-total').innerText = `R$ ${total.toFixed(2)}`;
        }

        function finishToDiscord() {
            let subtotal = cart.reduce((a,b) => a + parseFloat(b.price), 0);
            let total = subtotal - (subtotal * (activeDiscount / 100));
            const text = `üõí **PEDIDO BAHAMAS**\n${cart.map(i => `‚Ä¢ ${i.name}`).join('\n')}\nüí∞ **TOTAL:** R$ ${total.toFixed(2)}${activeDiscount ? ` (Cupom: ${activeDiscount}% OFF)` : ''}`;
            navigator.clipboard.writeText(text).then(() => {
                window.open(store.discord, '_blank');
            });
        }

        // --- ADM LOGIC ---
        function renderAdmin() {
            document.getElementById('adm-table-prods').innerHTML = store.prods.map(p => `<tr><td><small>${p.name}</small></td><td class="text-end"><button class="btn btn-sm btn-danger" onclick="deleteProd(${p.id})">x</button></td></tr>`).join('');
            document.getElementById('adm-list-cupons').innerHTML = store.coupons.map(c => `<div class="bg-dark p-2 rounded mb-1 d-flex justify-content-between"><span>${c.code} (${c.perc}%)</span><button class="btn btn-sm btn-danger" onclick="deleteCoupon('${c.code}')">x</button></div>`).join('');
            document.getElementById('adm-list-reviews').innerHTML = store.reviews.map((r, idx) => `<div class="bg-dark p-2 rounded mb-1 d-flex justify-content-between"><span>${r.user}</span><button class="btn btn-sm btn-danger" onclick="deleteReview(${idx})">x</button></div>`).join('');
            document.getElementById('cfg-discord').value = store.discord;
        }

        function openAddProdModal() { document.getElementById('p-cat').innerHTML = store.cats.map(c => `<option value="${c}">${c}</option>`).join(''); new bootstrap.Modal(document.getElementById('prodModal')).show(); }
        function saveProd() { const n = document.getElementById('p-name').value, p = document.getElementById('p-price').value, c = document.getElementById('p-cat').value, i = document.getElementById('p-img').value; if(n && p) { store.prods.push({id:Date.now(), name:n, price:p, cat:c, img:i}); sync(); bootstrap.Modal.getInstance(document.getElementById('prodModal')).hide(); } }
        function addCoupon() { const code = document.getElementById('cup-code').value.toUpperCase(), perc = document.getElementById('cup-perc').value; if(code && perc) { store.coupons.push({code, perc: parseInt(perc)}); sync(); } }
        function deleteCoupon(code) { store.coupons = store.coupons.filter(c => c.code !== code); sync(); }
        function addReview() { const user = document.getElementById('rev-user').value, text = document.getElementById('rev-text').value, stars = document.getElementById('rev-stars').value; if(user && text) { store.reviews.push({user, text, stars: parseInt(stars)}); sync(); } }
        function deleteReview(idx) { store.reviews.splice(idx,1); sync(); }
        function deleteProd(id) { store.prods = store.prods.filter(p => p.id !== id); sync(); }
        function saveConfigs() { store.discord = document.getElementById('cfg-discord').value; sync(); }

        function renderAll() { renderStore(); renderAdmin(); }
        renderAll();
    </script>
</body>
</html>
